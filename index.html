<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å…¬å¼ã‚²ãƒ¬ãƒ³ãƒ‡ãƒ©ã‚¤ãƒ– Ã— æ°—è±¡åº</title>
<style>
body {
  font-family: sans-serif;
  background: #eef6fb;
  padding: 15px;
}
h1 { text-align: center; }
select {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  margin-bottom: 10px;
}
img {
  width: 100%;
  border-radius: 8px;
  border: 1px solid #ccc;
}
.weather {
  background: #fff;
  padding: 12px;
  border-radius: 8px;
  margin: 10px 0;
}
.btn {
  display: block;
  text-align: center;
  padding: 12px;
  background: #0077cc;
  color: white;
  text-decoration: none;
  border-radius: 6px;
  font-weight: bold;
  margin-top: 10px;
}
.note {
  font-size: 12px;
  text-align: center;
  color: #555;
}
</style>
</head>
<body>

<h1>ğŸ¿ å…¬å¼ã‚²ãƒ¬ãƒ³ãƒ‡ãƒ©ã‚¤ãƒ–</h1>

<select id="spot" onchange="update()">
  <option value="">ã‚²ãƒ¬ãƒ³ãƒ‡ã‚’é¸æŠ</option>
  <option value="sapporo">æœ­å¹Œå›½éš›ã‚¹ã‚­ãƒ¼å ´</option>
  <option value="naeba">è‹—å ´ã‚¹ã‚­ãƒ¼å ´</option>
  <option value="hakuba">ç™½é¦¬å…«æ–¹å°¾æ ¹</option>
  <option value="zao">è”µç‹æ¸©æ³‰ã‚¹ã‚­ãƒ¼å ´</option>
</select>

<img id="cam" alt="ã‚²ãƒ¬ãƒ³ãƒ‡ãƒ©ã‚¤ãƒ–ã‚«ãƒ¡ãƒ©">

<div class="weather" id="weather">
å¤©æ°—æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
</div>

<a id="jmaLink" class="btn" target="_blank">
ğŸŒ¤ æ°—è±¡åºã®è©³ç´°ã‚’è¦‹ã‚‹
</a>

<p class="note">
â€»å…¬å¼ãƒ©ã‚¤ãƒ–ã‚«ãƒ¡ãƒ©ï¼ˆæ•°ç§’ã”ã¨ã«æ›´æ–°ã•ã‚Œã¾ã™ï¼‰
</p>

<script>
const spots = {
  sapporo: {
    cam: "https://www.sapporo-kokusai.jp/livecamera/camera1.jpg",
    code: "016000",
    jma: "https://www.jma.go.jp/bosai/forecast/#area_type=offices&area_code=016000"
  },
  naeba: {
    cam: "https://www.princehotels.co.jp/ski/naeba/livecamera/gelande.jpg",
    code: "150000",
    jma: "https://www.jma.go.jp/bosai/forecast/#area_type=offices&area_code=150000"
  },
  hakuba: {
    cam: "https://www.happo-one.jp/livecam/happo.jpg",
    code: "200000",
    jma: "https://www.jma.go.jp/bosai/forecast/#area_type=offices&area_code=200000"
  },
  zao: {
    cam: "https://www.zao-ski.or.jp/livecam/zao.jpg",
    code: "060000",
    jma: "https://www.jma.go.jp/bosai/forecast/#area_type=offices&area_code=060000"
  }
};

function update() {
  const key = document.getElementById("spot").value;
  if (!key) return;

  const s = spots[key];
  const img = document.getElementById("cam");

  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥å›é¿ï¼ˆç–‘ä¼¼ãƒ©ã‚¤ãƒ–ï¼‰
  img.src = s.cam + "?t=" + Date.now();

  document.getElementById("jmaLink").href = s.jma;

  fetch(`https://www.jma.go.jp/bosai/forecast/data/forecast/${s.code}.json`)
    .then(r => r.json())
    .then(data => {
      const a = data[0].timeSeries[0].areas[0];
      document.getElementById("weather").innerHTML = `
        <strong>${a.area.name}</strong><br>
        ä»Šæ—¥ï¼š${a.weathers[0]}<br>
        æ˜æ—¥ï¼š${a.weathers[1]}
      `;
    });

  // 10ç§’ã”ã¨ã«æ›´æ–°
  setInterval(() => {
    img.src = s.cam + "?t=" + Date.now();
  }, 10000);
}
</script>

</body>
</html>
